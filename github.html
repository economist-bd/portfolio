<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Repositories | Md. Monjirul Hoque</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], serif: ['Cinzel', 'serif'] },
                    colors: { brand: { gold: '#D4AF37', dark: '#0f0f0f', surface: '#1a1a1a' } }
                }
            }
        }
    </script>
</head>
<body class="bg-brand-dark text-gray-200 font-sans antialiased flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 py-4 px-4 lg:px-12 bg-brand-dark/95 backdrop-blur-sm border-b border-gray-800">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="index.html" class="text-xl md:text-2xl font-serif font-bold tracking-widest text-white">MONJIRUL.</a>
            <a href="index.html" class="text-xs tracking-widest text-brand-gold hover:text-white transition-colors uppercase"><i class="fas fa-arrow-left mr-2"></i> Back to Home</a>
        </div>
    </nav>

    <!-- Header -->
    <div class="pt-32 pb-8 px-4 text-center">
        <i class="fab fa-github text-5xl text-white mb-4"></i>
        <h1 class="text-3xl md:text-5xl font-serif font-bold text-white">Open Source Projects</h1>
        <p class="text-gray-400 mt-4 max-w-2xl mx-auto font-light">Explore my code contributions and repositories directly from GitHub.</p>
        
        <!-- Username Input Area -->
        <div class="mt-8 flex justify-center max-w-md mx-auto relative">
            <input type="text" id="github-username" placeholder="Enter GitHub Username" class="w-full bg-brand-surface border border-gray-700 text-white px-6 py-3 focus:outline-none focus:border-brand-gold transition-colors rounded-l-sm" value="monjirulhoque">
            <button onclick="fetchRepositories()" class="bg-brand-gold text-black px-6 py-3 font-bold uppercase tracking-wider text-xs hover:bg-white transition-colors rounded-r-sm">
                Load
            </button>
        </div>
        <p class="text-xs text-gray-500 mt-2">Tip: Enter your username above to load your repos.</p>
    </div>

    <!-- Loading Spinner -->
    <div id="loader" class="hidden justify-center items-center py-12">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brand-gold"></div>
    </div>

    <!-- Error Message -->
    <div id="error-msg" class="hidden text-center text-red-400 py-4"></div>

    <!-- Repositories Grid -->
    <section class="pb-24 px-4 max-w-7xl mx-auto flex-grow">
        <div id="repo-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Repos will be injected here -->
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-brand-dark border-t border-gray-900 py-10 text-center mt-auto">
        <p class="text-gray-600 text-xs tracking-widest">Â© 2024 MD. MONJIRUL HOQUE.</p>
    </footer>

    <script>
        async function fetchRepositories() {
            const usernameInput = document.getElementById('github-username').value.trim();
            const repoGrid = document.getElementById('repo-grid');
            const loader = document.getElementById('loader');
            const errorMsg = document.getElementById('error-msg');

            if (!usernameInput) return;

            // Reset UI
            repoGrid.innerHTML = '';
            errorMsg.classList.add('hidden');
            loader.classList.remove('hidden');
            loader.classList.add('flex');

            try {
                // Fetch data from GitHub API
                const response = await fetch(`https://api.github.com/users/${usernameInput}/repos?sort=updated&direction=desc&per_page=100`);
                
                if (!response.ok) {
                    if(response.status === 404) throw new Error("User not found");
                    throw new Error("Failed to fetch repositories");
                }

                const repos = await response.json();

                loader.classList.add('hidden');
                loader.classList.remove('flex');

                if (repos.length === 0) {
                    errorMsg.textContent = "No repositories found for this user.";
                    errorMsg.classList.remove('hidden');
                    return;
                }

                // Render Repos
                repos.forEach(repo => {
                    const card = document.createElement('div');
                    card.className = 'bg-brand-surface border border-gray-800 p-6 hover:border-brand-gold/50 transition-all duration-300 flex flex-col h-full group';
                    
                    // Language Color Mapping
                    const langColor = getLanguageColor(repo.language);

                    card.innerHTML = `
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex items-center">
                                <i class="fas fa-book-bookmark text-brand-gold mr-3"></i>
                                <a href="${repo.html_url}" target="_blank" class="text-lg font-bold text-white hover:underline truncate max-w-[200px]">${repo.name}</a>
                            </div>
                            <div class="text-gray-500 text-xs border border-gray-700 px-2 py-1 rounded-full">
                                ${repo.private ? 'Private' : 'Public'}
                            </div>
                        </div>
                        
                        <p class="text-gray-400 text-sm mb-6 flex-grow font-light line-clamp-3">
                            ${repo.description || 'No description available for this project.'}
                        </p>
                        
                        <div class="flex justify-between items-center text-xs text-gray-500 border-t border-gray-800 pt-4 mt-auto">
                            <div class="flex items-center space-x-4">
                                <span class="flex items-center">
                                    <span class="w-3 h-3 rounded-full mr-2" style="background-color: ${langColor}"></span>
                                    ${repo.language || 'Code'}
                                </span>
                                <span class="flex items-center">
                                    <i class="far fa-star mr-1"></i> ${repo.stargazers_count}
                                </span>
                                <span class="flex items-center">
                                    <i class="fas fa-code-branch mr-1"></i> ${repo.forks_count}
                                </span>
                            </div>
                            <a href="${repo.html_url}" target="_blank" class="text-white group-hover:text-brand-gold transition-colors">
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                        </div>
                    `;
                    repoGrid.appendChild(card);
                });

            } catch (error) {
                loader.classList.add('hidden');
                loader.classList.remove('flex');
                errorMsg.textContent = error.message;
                errorMsg.classList.remove('hidden');
            }
        }

        function getLanguageColor(language) {
            const colors = {
                'JavaScript': '#f1e05a',
                'HTML': '#e34c26',
                'CSS': '#563d7c',
                'Python': '#3572A5',
                'Java': '#b07219',
                'TypeScript': '#2b7489',
                'C++': '#f34b7d',
                'PHP': '#4F5D95',
                'Ruby': '#701516',
                'Go': '#00ADD8'
            };
            return colors[language] || '#8b949e'; // Default gray
        }

        // Initial call (Optional: removes manual click requirement if username is set in input value)
        // fetchRepositories(); 

    </script>
</body>
</html>
